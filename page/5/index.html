<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="戛戛Happy" />


    
     
        <meta name="google-site-verification" content="mRjQM6azHRnllmCObIorLO1p8dqt92U33mbEzoA2HnU" />
    


<meta property="og:type" content="website">
<meta property="og:title" content="漂自己的移，让别人都撞墙去吧">
<meta property="og:url" content="http://www.gagahappy.com/page/5/index.html">
<meta property="og:site_name" content="漂自己的移，让别人都撞墙去吧">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="漂自己的移，让别人都撞墙去吧">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="漂自己的移，让别人都撞墙去吧" type="application/atom+xml">





    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>漂自己的移，让别人都撞墙去吧</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/huitailang.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">戛戛Happy</a></h1>
        </hgroup>

        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tag/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa Facebook" href="#" title="Facebook"></a>
                            
                                <a class="fa Twitter" href="#" title="Twitter"></a>
                            
                                <a class="fa Instagram" href="#" title="Instagram"></a>
                            
                                <a class="fa _500px" href="#" title="_500px"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tag/avril/">Avril</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/bdd/">BDD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/hotspot-shield/">Hotspot Shield</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/rails/">Rails</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/ruby/">Ruby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/subversion/">Subversion</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/tdd/">TDD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/taandme/">Ta们的我</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/vmware/">VMware</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/adwords/">adwords</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/ajax/">ajax</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/apple/">apple</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/bootstrap/">bootstrap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/c-lang/">c-lang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/chrome/">chrome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/dropbox/">dropbox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/facebook/">facebook</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/fcitx/">fcitx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/fedora/">fedora</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/firefox/">firefox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/flash/">flash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/google/">google</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/http/">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/iphone/">iPhone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/innodb/">innodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/iphone/">iphone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/lightroom/">lightroom</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/love/">love</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/mac/">mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/memcached/">memcached</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/netbeans/">netbeans</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/opera/">opera</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/photograph/">photograph</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/postgresql/">postgresql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/pry/">pry</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/rack/">rack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/redis/">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/resque/">resque</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/rspec/">rspec</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/rubymine/">rubymine</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/rvm/">rvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/s3/">s3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/scrum/">scrum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/starbucks/">starbucks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/sublime/">sublime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/svn/">svn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/textmate/">textmate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/thin/">thin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/twitter/">twitter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/ubuntu/">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/virtualbox/">virtualbox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/web/">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/win7/">win7</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/wordpress/">wordpress</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/people/">人物</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/mycook/">做滴菜</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/frontend/">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/entertainment/">娱乐</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/wedding/">婚礼</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/youknow/">小知识</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/caipiao/">彩票</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/weibo/">微博</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/photographer/">摄影</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/os/">操作系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/agile/">敏捷</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/news/">新闻</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/funny/">有趣</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/browser/">浏览器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/life/">生活</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/movie/">电影</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/tv/">电视剧</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/cate/">美食</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/zhuangxiu/">装修</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/finance/">财经</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/shopping/">购物</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/journal/">随笔</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tag/rubik/">魔方</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                    </div>
                </section>
                

                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">戛戛Happy</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/huitailang.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">戛戛Happy</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tag/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa Facebook" target="_blank" href="#" title="Facebook"></a>
                            
                                <a class="fa Twitter" target="_blank" href="#" title="Twitter"></a>
                            
                                <a class="fa Instagram" target="_blank" href="#" title="Instagram"></a>
                            
                                <a class="fa _500px" target="_blank" href="#" title="_500px"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-mac-use-lsof-to-show-which-process-use-the-port" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/mac-use-lsof-to-show-which-process-use-the-port/" class="article-date">
      <time datetime="2015-04-08T09:39:26.000Z" itemprop="datePublished">2015-04-08</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/mac-use-lsof-to-show-which-process-use-the-port/">mac 查看端口占用程序</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>mac 查看端口占用程序<br>lsof -i :9001</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/development/">程序开发</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/mac/">mac</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-how-to-understanding-something-that-is-complex-and-poorly-documented" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/how-to-understanding-something-that-is-complex-and-poorly-documented/" class="article-date">
      <time datetime="2015-04-07T12:27:04.000Z" itemprop="datePublished">2015-04-07</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/how-to-understanding-something-that-is-complex-and-poorly-documented/">how to understanding something that is complex and poorly documented</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <blockquote>
<p>An approach I’ve long taken to understanding something that is complex and poorly documented is the following three steps:</p>
<ol>
<li><p>Read the existing documentation and the existing code, until a basic understanding is reached. Often there are serious misunderstandings or incorrect factorization at this step.</p>
</li>
<li><p>Write my own implementation, even a very basic and broken one, preferably in a completely different language (which avoids the tendency to cut and paste anything). Revise my understanding based on what works and what doesn’t.</p>
</li>
<li><p>Create new documentation and diagrams based on my new understanding. Refactor my implementation as necessary (the act of reviewing everything in order to document it often reveals incorrect factorizations). Correct documentation based on new understanding from refactoring code. Repeat until correct.</p>
</li>
</ol>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/database/">数据库</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/mysql/">mysql</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-which-day-is-easter-in-2015" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/which-day-is-easter-in-2015/" class="article-date">
      <time datetime="2015-04-06T04:23:06.000Z" itemprop="datePublished">2015-04-06</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/which-day-is-easter-in-2015/">复活节的由来,2015年复活节是哪一天几月几日</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <p>复活节（主复活日）是一个西方的重要节日，在每年春分月圆之后第一个星期日。基督徒认为，复活节象征着重生与希望，为纪念耶稣基督于公元30到33年之间被钉死在十字架之后第三天复活的日子。天主教/新教和东正教复活节的计算略有差异，根据罗马教会传统，在春分(3月21日)当日见到满月或过了春分见到第一个满月后，遇到的第一个星期日即为复活节。东正教会则规定，如果满月恰好出现在这第一个星期日，则复活节再推迟一周。因此，复活节的日期大致在公历3月22日至4月25日之间。</p>
<p>　　复活节那一天，是经由三个历法（分别是西历、中国阴历、星期）合并出来的，怪不得它会如此飘忽不定了。有些年份三个教派的复活节是重合的，而有些年份又不同，进而它们耶稣受难日的日期也有所差异，2015年的天主教、新教的复活节是2015年4月5日。</p>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/gossip/">杂七杂八</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/youknow/">小知识</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/which-day-is-easter-in-2015/#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-how-to-use-eval-args-filename-and-lineno" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/how-to-use-eval-args-filename-and-lineno/" class="article-date">
      <time datetime="2015-04-05T15:22:09.000Z" itemprop="datePublished">2015-04-05</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/how-to-use-eval-args-filename-and-lineno/">测试eval的filename,与lineno参数使用</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 目标1:</span></div><div class="line"><span class="comment"># 1、测试eval的filename,与lineno参数使用</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 结论</span></div><div class="line"><span class="comment"># 1、可以自定义程序出错时的出错信息（出错的文件名，程序在哪行执行的,方便出错日志的查询,错误的定位)</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">my_method</span></span></div><div class="line">    string = <span class="string">"1/0"</span></div><div class="line">    <span class="comment"># eval(string, nil, __FILE__, __LINE__)</span></div><div class="line">    eval(string, <span class="literal">nil</span>, <span class="string">"custom_file.rb"</span>, <span class="number">60</span>)</div><div class="line">    <span class="comment"># eval(string)</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">MyClass.new.my_method <span class="comment"># custom_file.rb:60:in `/': divided by 0 (ZeroDivisionError)</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/development/">程序开发</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/ruby/">Ruby</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-load-secondary-args-true-or-false" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/load-secondary-args-true-or-false/" class="article-date">
      <time datetime="2015-04-04T14:06:30.000Z" itemprop="datePublished">2015-04-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/load-secondary-args-true-or-false/">load文件参数为false或true时,对变量,实例变量,常量的影响</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 目标1:</span></div><div class="line"><span class="comment"># 1、load文件参数为false时，对变量，实例变量,常量的影响</span></div><div class="line"><span class="comment"># 2、load文件参数为false时，类是否被重新打开</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 结论</span></div><div class="line"><span class="comment"># 1、变量不会被加载的文件影响，实例变量和常量会被影响。因为被加载文件中的变量会在文件加载完成后，掉出加载文件的作用域</span></div><div class="line"><span class="comment">#    而实例变量和常量不会掉出作用域</span></div><div class="line"><span class="comment"># 2、类可以被重新打开，因为被加载文件中类也没有掉出作用域（因为类也是常量）</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line">lambda &#123;</div><div class="line">  var  = <span class="number">2</span></div><div class="line">  @var = <span class="number">2</span></div><div class="line">  VAR  = <span class="number">2</span></div><div class="line"></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_method</span></span></div><div class="line">      <span class="string">"i'm in load_2 file"</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  puts <span class="string">"==========Test1:OUTPUT=========="</span></div><div class="line"></div><div class="line">  load File.expand_path(<span class="string">'load_file.rb'</span>, File.dirname(__FILE_<span class="number">_</span>))</div><div class="line"></div><div class="line">  puts <span class="string">'==========load_2.rb======='</span></div><div class="line">  puts <span class="string">"var :<span class="subst">#&#123;var &#125;</span>"</span></div><div class="line">  puts <span class="string">"@var:<span class="subst">#&#123;@var&#125;</span>"</span></div><div class="line">  puts <span class="string">"VAR :<span class="subst">#&#123;VAR &#125;</span>"</span></div><div class="line">  puts <span class="string">"my_method:<span class="subst">#&#123;MyClass.new.my_method&#125;</span>"</span></div><div class="line">  puts <span class="string">'==========load_2.rb======='</span></div><div class="line">  puts <span class="string">"==========Test1:OUTPUT=========="</span></div><div class="line">  <span class="comment"># &lt;!-- more --&gt;</span></div><div class="line">  <span class="comment"># ==========Test1:OUTPUT==========</span></div><div class="line">  <span class="comment"># ==========load_1.rb=======</span></div><div class="line">  <span class="comment"># var :1</span></div><div class="line">  <span class="comment"># <span class="doctag">@var</span>:1</span></div><div class="line">  <span class="comment"># VAR :1</span></div><div class="line">  <span class="comment"># my_method:i'm in load_1 file</span></div><div class="line">  <span class="comment"># ==========load_1.rb=======</span></div><div class="line"></div><div class="line">  <span class="comment"># ==========load_2.rb=======</span></div><div class="line">  <span class="comment"># var :2</span></div><div class="line">  <span class="comment"># <span class="doctag">@var</span>:1</span></div><div class="line">  <span class="comment"># VAR :1</span></div><div class="line">  <span class="comment"># my_method:i'm in load_1 file</span></div><div class="line">  <span class="comment"># ==========load_2.rb=======</span></div><div class="line">  <span class="comment"># ==========Test1:OUTPUT==========</span></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 目标2:</span></div><div class="line"><span class="comment"># 1、load文件参数为true时，对变量，实例变量,常量的影响</span></div><div class="line"><span class="comment"># 2、load文件参数为true时，类是否被重新打开</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 结论</span></div><div class="line"><span class="comment"># 1、变量不会被加载的文件影响，实例变量和常量也不会被影响</span></div><div class="line"><span class="comment"># 2、类不会被影响</span></div><div class="line"><span class="comment"># 因为ruby会在load文件时为其创建匿名模块，让其文件中的实例变量、常量、类落在其自身范围内，且在load完成后，销毁这个</span></div><div class="line"><span class="comment"># 匿名模块（即加载文件中的所有内容），加入true参数的这种做法无法让加载它的文件使用其文件中代码，仅仅是起到了运行load</span></div><div class="line"><span class="comment"># 文件的代码的作用</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line">lambda &#123;</div><div class="line">  var  = <span class="number">2</span></div><div class="line">  @var = <span class="number">2</span></div><div class="line">  VAR  = <span class="number">2</span></div><div class="line"></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">my_method</span></span></div><div class="line">      <span class="string">"i'm in load_2 file"</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  puts <span class="string">"==========Test2:OUTPUT=========="</span></div><div class="line"></div><div class="line">  load File.expand_path(<span class="string">'load_file.rb'</span>, File.dirname(__FILE_<span class="number">_</span>)), <span class="literal">true</span></div><div class="line"></div><div class="line">  puts <span class="string">'==========load_2.rb======='</span></div><div class="line">  puts <span class="string">"var :<span class="subst">#&#123;var &#125;</span>"</span></div><div class="line">  puts <span class="string">"@var:<span class="subst">#&#123;@var&#125;</span>"</span></div><div class="line">  puts <span class="string">"VAR :<span class="subst">#&#123;VAR &#125;</span>"</span></div><div class="line">  puts <span class="string">"my_method:<span class="subst">#&#123;MyClass.new.my_method&#125;</span>"</span></div><div class="line">  puts <span class="string">'==========load_2.rb======='</span></div><div class="line">  puts <span class="string">"==========Test2:OUTPUT=========="</span></div><div class="line"></div><div class="line">  <span class="comment"># ==========Test2:OUTPUT==========</span></div><div class="line">  <span class="comment"># ==========load_1.rb=======</span></div><div class="line">  <span class="comment"># var :1</span></div><div class="line">  <span class="comment"># <span class="doctag">@var</span>:1</span></div><div class="line">  <span class="comment"># VAR :1</span></div><div class="line">  <span class="comment"># my_method:i'm in load_1 file</span></div><div class="line">  <span class="comment"># ==========load_1.rb=======</span></div><div class="line"></div><div class="line">  <span class="comment"># ==========load_2.rb=======</span></div><div class="line">  <span class="comment"># var :2</span></div><div class="line">  <span class="comment"># <span class="doctag">@var</span>:2</span></div><div class="line">  <span class="comment"># VAR :2</span></div><div class="line">  <span class="comment"># my_method:i'm in load_2 file</span></div><div class="line">  <span class="comment"># ==========load_2.rb=======</span></div><div class="line">  <span class="comment"># ==========Test2:OUTPUT==========</span></div><div class="line">&#125;.call</div></pre></td></tr></table></figure>
<p>load_file.rb<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># module Load1</span></div><div class="line"></div><div class="line">var = <span class="number">1</span></div><div class="line">@var = <span class="number">1</span></div><div class="line">VAR = <span class="number">1</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">my_method</span></span></div><div class="line">    <span class="string">"i'm in load_1 file"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">puts <span class="string">'==========load_1.rb======='</span></div><div class="line">puts <span class="string">"var :<span class="subst">#&#123;var &#125;</span>"</span></div><div class="line">puts <span class="string">"@var:<span class="subst">#&#123;@var&#125;</span>"</span></div><div class="line">puts <span class="string">"VAR :<span class="subst">#&#123;VAR &#125;</span>"</span></div><div class="line">puts <span class="string">"my_method:<span class="subst">#&#123;MyClass.new.my_method&#125;</span>"</span></div><div class="line">puts <span class="string">'==========load_1.rb======='</span></div><div class="line">puts</div><div class="line"></div><div class="line"><span class="comment"># end</span></div></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/development/">程序开发</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/ruby/">Ruby</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-instance-variate-in-toplevel" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/instance-variate-in-toplevel/" class="article-date">
      <time datetime="2015-04-03T13:02:35.000Z" itemprop="datePublished">2015-04-03</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/instance-variate-in-toplevel/">测试顶级上下文中定义的实例变量的作用域</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 目标1:</span></div><div class="line"><span class="comment"># 1、测试顶级上下文中定义的实例变量的作用域</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 结论</span></div><div class="line"><span class="comment"># 1、顶级上下文中定义的实例变量只能被main对象访问，因为实例变量暴露在toplevel的context中，self为main</span></div><div class="line"><span class="comment">#    相当于运行main.instance_eval&#123;<span class="doctag">@toplevel</span>_variate="toplevel variate"&#125;</span></div><div class="line"><span class="comment"># 2、私有方法不属于instance_methods的集合，它属于private_instance_methods</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line"></div><div class="line">@toplevel_variate = <span class="string">"toplevel variate"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_method</span></span></div><div class="line">  <span class="string">"@toplevel_variate in my_method which define in toplevel:<span class="subst">#&#123;@toplevel_variate&#125;</span>"</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">Object.class_eval <span class="keyword">do</span> <span class="params">|variable|</span></div><div class="line">  puts <span class="string">"Object can acccess @toplevel_variate:<span class="subst">#&#123;@var&#125;</span>"</span> <span class="comment"># nil</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">self</span>.instance_eval <span class="keyword">do</span></div><div class="line">  puts <span class="string">"@toplevel_variate in self object:<span class="subst">#&#123;@toplevel_variate&#125;</span>"</span> <span class="comment"># toplevel variate</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">puts my_method</div><div class="line">puts <span class="string">"Object.private_instance_methods:"</span> + Object.private_instance_methods(<span class="literal">false</span>).grep(<span class="symbol">:my_method</span>).to_s <span class="comment"># :my_method</span></div><div class="line">puts <span class="string">"Object.instance_methods:"</span> + Object.instance_methods(<span class="literal">false</span>).grep(<span class="symbol">:my_method</span>).to_s <span class="comment">#nil</span></div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/development/">程序开发</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/ruby/">Ruby</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-extend-class-method-by-module" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/extend-class-method-by-module/" class="article-date">
      <time datetime="2015-03-31T15:55:43.000Z" itemprop="datePublished">2015-03-31</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/extend-class-method-by-module/">使用include,让模块中定义的方法分别插入类方法与实例方法</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 目标1:</span></div><div class="line"><span class="comment"># 1、类扩展:使用include,让模块中定义的方法分别插入类方法与实例方法中</span></div><div class="line"><span class="comment"># 2、obj实例对象调用extend,则模块中定义的方法为？</span></div><div class="line"><span class="comment"># 3、在模块中定义的实例变量能否被包含它的类的实例对象看到</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 结论</span></div><div class="line"><span class="comment"># 1、通过重定义横块中的self.included方法，并对参数(receiver),使用关键字extend/include,分别向包含它的类中插入了</span></div><div class="line"><span class="comment">#    类方法(定义在ClassMethods模块中的方法)和实例方法(定义在InstanceMethod模块中)</span></div><div class="line"><span class="comment"># 2、obj实例对象调用extend,则模块中定义的方法为这个obj的单例方法，可以通过把方法定义在module中，让实例对象调用extend</span></div><div class="line"><span class="comment">#    来方便快速的增加自身的单例方法</span></div><div class="line"><span class="comment"># 3、可以。在模块中定义的实例变量可以被包含它的类的实例对象看到,因为被include的模块相当于当前类的父类，当前对象的</span></div><div class="line"><span class="comment">#    实例变量对其所有实例方法可见</span></div><div class="line"><span class="comment"># 4、extend方法的实质就是把module中定义的方法插入到对象的单件类中</span></div><div class="line"><span class="comment"># 5、调用MyClass.instance_methods(false)可以发现，在它的实例方法中并不包含实例方法instance_method，而MyClass</span></div><div class="line"><span class="comment">#    的实例对象可以调用这个方法，这正说明了类中include的模块(被代理类封装)充当这个类的父类。也验证了结论4</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line">lambda &#123;</div><div class="line">  <span class="class"><span class="keyword">module</span> <span class="title">M</span></span></div><div class="line">    <span class="class"><span class="keyword">module</span> <span class="title">ClassMethods</span></span></div><div class="line">      <span class="function"><span class="keyword">def</span> <span class="title">class_method</span></span></div><div class="line">        <span class="string">"i am a class method"</span></div><div class="line">      <span class="keyword">end</span></div><div class="line">    <span class="keyword">end</span></div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">module</span> <span class="title">InstanceMethods</span></span></div><div class="line">      <span class="function"><span class="keyword">def</span> <span class="title">instance_method</span><span class="params">(from)</span></span></div><div class="line">        @instance_variate = <span class="string">"i am a instance variate in M"</span></div><div class="line">        <span class="string">"i am a instance method from:<span class="subst">#&#123;from&#125;</span>"</span></div><div class="line">      <span class="keyword">end</span></div><div class="line">    <span class="keyword">end</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">self</span>.<span class="title">included</span><span class="params">(receiver)</span></span></div><div class="line">      receiver.extend         ClassMethods</div><div class="line">      receiver.send <span class="symbol">:include</span>, InstanceMethods</div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="comment">#&lt;!-- more --&gt;</span></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span></span></div><div class="line">    <span class="keyword">include</span> M</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_instance_variate_from_module</span><span class="params">(from)</span></span></div><div class="line">      <span class="string">"<span class="subst">#&#123;@instance_variate&#125;</span> from: <span class="subst">#&#123;from&#125;</span>"</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  obj = Object.new</div><div class="line">  obj.extend M::InstanceMethods</div><div class="line">  my = MyClass.new</div><div class="line"></div><div class="line">  puts <span class="string">"================test1 OUTPUT================"</span></div><div class="line">  puts MyClass.class_method</div><div class="line">  puts my.instance_method(<span class="string">"MyClass.new obj"</span>)</div><div class="line">  puts my.get_instance_variate_from_module(<span class="string">"MyClass.new"</span>)</div><div class="line">  puts obj.instance_method(<span class="string">"Object.new"</span>)</div><div class="line">  puts obj.instance_eval(<span class="string">"@instance_variate"</span>)</div><div class="line">  puts <span class="string">"MyClass.instance_methods:"</span>+MyClass.instance_methods(<span class="literal">false</span>).to_s</div><div class="line">  puts <span class="string">"================test1 OUTPUT================"</span></div><div class="line"></div><div class="line">  <span class="comment"># ================test1 OUTPUT================</span></div><div class="line">  <span class="comment"># i am a class method</span></div><div class="line">  <span class="comment"># i am a instance method from:MyClass.new obj</span></div><div class="line">  <span class="comment"># i am a instance variate in M from: MyClass.new</span></div><div class="line">  <span class="comment"># i am a instance method from:Object.new</span></div><div class="line">  <span class="comment"># i am a instance variate in M</span></div><div class="line">  <span class="comment"># MyClass.instance_methods:[:get_instance_variate_from_module]</span></div><div class="line">  <span class="comment"># ================test1 OUTPUT================</span></div><div class="line"></div><div class="line">&#125;.call</div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/development/">程序开发</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/ruby/">Ruby</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-define-method-in-kernel-module" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/define-method-in-kernel-module/" class="article-date">
      <time datetime="2015-03-30T14:46:08.000Z" itemprop="datePublished">2015-03-30</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/define-method-in-kernel-module/">测试在kernel中定义的方法的作用对象</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 目标1:</span></div><div class="line"><span class="comment"># 1、Kernel模块内定义实例方法，哪些对象可以使用</span></div><div class="line"><span class="comment"># 2、Kernel的单件方法哪些对象可以使用</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 结论</span></div><div class="line"><span class="comment"># 1、Kernel模块内定义实例方法,ruby的所有对象都可以使用，因为Kernel会被Mixin入Object,其实例方法(用def定义的),可以</span></div><div class="line"><span class="comment">#    被所有ruby对象使用(MyClass/"string")</span></div><div class="line"><span class="comment"># 2、Kernel的单件方法只能被其自己使用,其它类和方法都不能使用(MyClass/MyClass.new)</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line">lambda &#123;</div><div class="line">  <span class="class"><span class="keyword">module</span> <span class="title">Kernel</span></span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">self</span>.<span class="title">im_singleton_method</span></span></div><div class="line">      <span class="string">"i'm a singleton method of Kernel define in Kernel"</span></div><div class="line">    <span class="keyword">end</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">im_instance_method</span><span class="params">(from=<span class="string">"Kernel"</span>)</span></span></div><div class="line">      <span class="string">"i'm a instance method define in Kernel and call from <span class="subst">#&#123;from&#125;</span>"</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span>;</span> <span class="keyword">end</span></div><div class="line">  puts Kernel.im_singleton_method</div><div class="line">  puts <span class="string">"Kernel.singleton_methods:"</span> + Kernel.singleton_methods(<span class="literal">false</span>).grep(<span class="regexp">/im_singleton_method/</span>).to_s</div><div class="line">  puts <span class="string">"Kernel.im_instance_method:"</span> + Kernel.instance_methods(<span class="literal">false</span>).grep(<span class="regexp">/im_instance_method/</span>).to_s</div><div class="line">  puts MyClass.new.im_instance_method(<span class="string">"obj"</span>)</div><div class="line">  puts MyClass.im_instance_method(<span class="string">"MyClass"</span>)</div><div class="line">  puts <span class="keyword">begin</span> MyClass.im_singleton_method <span class="keyword">rescue</span> <span class="string">"undefined method `im_singleton_method' for MyClass:Class"</span> <span class="keyword">end</span></div><div class="line">  puts <span class="keyword">begin</span> MyClass.new.im_singleton_method <span class="keyword">rescue</span> <span class="string">"undefined method `im_singleton_method' for #&lt;MyClass:0x007fbb22813640&gt;"</span> <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="comment"># ================test1 OUTPUT================</span></div><div class="line">  <span class="comment"># i'm a singleton method of Kernel define in Kernel</span></div><div class="line">  <span class="comment"># Kernel.singleton_methods:[:im_singleton_method]</span></div><div class="line">  <span class="comment"># Kernel.im_instance_method:[:im_instance_method]</span></div><div class="line">  <span class="comment"># i'm a instance method define in Kernel and call from obj</span></div><div class="line">  <span class="comment"># i'm a instance method define in Kernel and call from MyClass</span></div><div class="line">  <span class="comment"># undefined method `im_singleton_method' for MyClass:Class</span></div><div class="line">  <span class="comment"># undefined method `im_singleton_method' for #&lt;MyClass:0x007fbb22813640&gt;</span></div><div class="line">  <span class="comment"># ================test1 OUTPUT================</span></div><div class="line">&#125;.call</div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/development/">程序开发</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/ruby/">Ruby</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-sublime-text-load-rvm-ruby-version" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/sublime-text-load-rvm-ruby-version/" class="article-date">
      <time datetime="2015-03-28T13:32:08.000Z" itemprop="datePublished">2015-03-28</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/sublime-text-load-rvm-ruby-version/">sublime text 加载 rvm 指定的ruby版本</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>在sublime中用cmd+b运行代码时，其运行环境往往和你正在使用的rvm指定的ruby版本不一样，安装RVM switch for sublime插件可以较好的解决这个问题。</p>
<p>在安装后，你可以选择</p>
<ul>
<li>RVM Auto Ruby:设置当前环境和你的RVM一致（最好在cmd下先用rvm指定ruby版本,再用cmd打开sublime）</li>
<li>RVM Default Ruby</li>
<li>RVM System Ruby</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/software/">玩转软件</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/sublime/">sublime</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-when-run-of-block-in-mehtod" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/when-run-of-block-in-mehtod/" class="article-date">
      <time datetime="2015-03-27T13:52:04.000Z" itemprop="datePublished">2015-03-27</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/when-run-of-block-in-mehtod/">测试块中的代码什么时候被执行</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 目标1:</span></div><div class="line"><span class="comment"># 1、测试块中的代码什么时候被执行</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 结论</span></div><div class="line"><span class="comment"># 1、只有在块被真正调用的时候才会被执行:对块调用方法yield/call</span></div><div class="line"><span class="comment"># 说明: 一般方法中都会用yield去调用块，使得传入方法的块中的代码马上执行,这难免会让人产生代码只要被放在do..end或&#123;&#125;</span></div><div class="line"><span class="comment"># 就会被马上执行的错觉。</span></div><div class="line"><span class="comment"># 下面的代码只有当去掉注释时，块中的代码才会被执行</span></div><div class="line"><span class="comment"># 2、调用yield后，就一定要传入块，否则就产生错误，除非在加入了block_given?判断</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line">lambda &#123;</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">my_method</span><span class="params">(&amp;block)</span></span></div><div class="line">    <span class="comment"># yield</span></div><div class="line">    <span class="comment"># block.call</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  my_method <span class="keyword">do</span></div><div class="line">    lastname = <span class="string">"Caroline"</span></div><div class="line">    puts lastname <span class="comment"># =&gt;这里不会有输出，除非去掉方法中的注释</span></div><div class="line">  <span class="keyword">end</span></div><div class="line">&#125;.call</div></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/development/">程序开发</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/ruby/">Ruby</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-thoughtful-ruby-block-and-variable" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/thoughtful-ruby-block-and-variable/" class="article-date">
      <time datetime="2015-03-26T12:56:48.000Z" itemprop="datePublished">2015-03-26</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/thoughtful-ruby-block-and-variable/">ruby 块与局部变量绑定的思考</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>文章已经修改，之前的结论有误，现已经修改<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 重要结论:</span></div><div class="line"><span class="comment"># 1、块绑定局部变量的时间:在块被定义的时开始绑定的,绑定局部变量只是名子绑定,块内绑定的同名局部变量的值还可以在块外被修改</span></div><div class="line"><span class="comment">#（在块绑定局部变量后，如果块外部的同名局部变量改变了其值，则块中绑定的同名变量的值会被改变）</span></div><div class="line"><span class="comment"># 以下测试的局部绑定都证明了绑定是从块被定义时开始的</span></div><div class="line"><span class="comment"># 2、注意那些在块中初始化的变量，是否这些变量也出现在块定义外部的前后，不同位置的同名局部变量会对块内的变量产生不同的影响</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line"></div><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 目标1:</span></div><div class="line"><span class="comment"># 测试方法中的局部变量firstname,lastname是否会影响到块中的被绑定的同名变量的值</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 结论</span></div><div class="line"><span class="comment"># 1、块会绑定局部变量firstname,lastname,把它们以块的方式传到my_method方法</span></div><div class="line"><span class="comment"># 它们的值不会受到方法中同名变量的影响（闭包特性）</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line">lambda &#123;</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">my_method</span></span></div><div class="line">    firstname = <span class="string">"Maria"</span></div><div class="line">    lastname = <span class="string">"Sharapova"</span></div><div class="line">    <span class="keyword">yield</span> <span class="string">"Hi! I'm"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line">  firstname = <span class="string">"Max"</span></div><div class="line">  lastname = <span class="string">"Black"</span></div><div class="line">  myname = lambda &#123; <span class="params">|say|</span> puts <span class="string">"test1: <span class="subst">#&#123;say&#125;</span> <span class="subst">#&#123;firstname&#125;</span> <span class="subst">#&#123;lastname&#125;</span>"</span> &#125;</div><div class="line">  my_method &amp;myname <span class="comment">#＝&gt; Hi! I'm Max Black</span></div><div class="line">&#125;.call</div><div class="line"></div><div class="line"><span class="comment"># &lt;!-- more --&gt;</span></div><div class="line"></div><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 目标2:</span></div><div class="line"><span class="comment"># 1、测试块可以绑定局部变量的范围</span></div><div class="line"><span class="comment"># 2、在块后面出现的局部变量是否会覆盖其块内已经绑定的同名局部变量的值（块中已经绑定的局部变量的值是否会被改变）</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 结论</span></div><div class="line"><span class="comment"># 1、块会绑定在它定义时出现在它前面的局部变量firstname,lastname.</span></div><div class="line"><span class="comment"># 2、块中last变量的值为lastname="wang"，因为块在定义时绑定了lastname,块中同名的lastname对上下文中的其它成员</span></div><div class="line"><span class="comment"># 是可见的，所以对局部变量赋值lastname="Wang"，也就改变了块内lastname的值。它覆盖了前面lastname="Black"的值。</span></div><div class="line"><span class="comment"># 3、局部变量lastname＝"Green"出现在块被调用以后，块调用在赋值语句之前执行，对lastname="Green"的赋值不会影响到</span></div><div class="line"><span class="comment"># 块内部的同名变量lastname,此时块内部的lastname＝"wang"</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line">lambda &#123;</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">my_method</span></span></div><div class="line">    firstname = <span class="string">"Maria"</span></div><div class="line">    lastname = <span class="string">"Sharapova"</span></div><div class="line">    <span class="keyword">yield</span> <span class="string">"Hi! I'm"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line">  firstname = <span class="string">"Max"</span></div><div class="line">  lastname = <span class="string">"Black"</span></div><div class="line">  myname = lambda &#123; <span class="params">|say|</span> puts <span class="string">"test2: <span class="subst">#&#123;say&#125;</span> <span class="subst">#&#123;firstname&#125;</span> <span class="subst">#&#123;lastname&#125;</span>"</span> &#125;</div><div class="line">  lastname = <span class="string">"Wang"</span></div><div class="line">  my_method &amp;myname <span class="comment">#＝&gt; Hi! I'm Max Wang</span></div><div class="line">  lastname = <span class="string">"Green"</span></div><div class="line">&#125;.call</div><div class="line"></div><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 目标3:</span></div><div class="line"><span class="comment"># 测试在块中定义的已经初始化的变量的值是否受外部的同名局部变量值的影响:(局部变量的定义在块定义的前面)</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 结论</span></div><div class="line"><span class="comment"># 1、局部变量不能影响块中同名变量的值</span></div><div class="line"><span class="comment"># 2、局部变量的值会随块中同名变量的值在执行过程中的改变而改变,day_changed的值为被改变的值:Mon</span></div><div class="line"><span class="comment"># 3、发生1、2情况的原因是，在块被执行时，它会先看到块内的say="Mon"，而不再去看被绑定的局部变量say的值("Sun")</span></div><div class="line"><span class="comment"># 因为局部变量day已经被绑定到块，块中的day对其上下文可见，在块执行后，块中同名变量day的值会改变局部</span></div><div class="line"><span class="comment"># 变量day的值，此时局部变量day的值为"Mon"</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line">lambda &#123;</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">my_method</span></span></div><div class="line">    firstname = <span class="string">"Maria"</span></div><div class="line">    lastname = <span class="string">"Sharapova"</span></div><div class="line">    <span class="keyword">yield</span> <span class="string">"Hi! I'm"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line">  firstname = <span class="string">"Max"</span></div><div class="line">  lastname = <span class="string">"Black"</span></div><div class="line">  day = <span class="string">"Sun"</span></div><div class="line">  myname = lambda &#123; <span class="params">|say|</span> day = <span class="string">"Mon"</span>; puts <span class="string">"test3: <span class="subst">#&#123;say&#125;</span> <span class="subst">#&#123;firstname&#125;</span> <span class="subst">#&#123;lastname&#125;</span> at <span class="subst">#&#123;day&#125;</span>"</span>&#125;</div><div class="line">  <span class="comment">#day = "Sun"</span></div><div class="line">  my_method &amp;myname <span class="comment">#＝&gt; Hi! I'm Max Black at Mon</span></div><div class="line">  day_changed = day</div><div class="line">  puts <span class="string">"test3: day:<span class="subst">#&#123;day_changed&#125;</span>"</span></div><div class="line">  <span class="comment"># day = "Wed"</span></div><div class="line">  <span class="comment"># my_method &amp;myname #＝&gt; Hi! I'm Max Black at Mon</span></div><div class="line">  <span class="comment"># day_changed = day</span></div><div class="line">  <span class="comment"># puts "test3: day:#&#123;day_changed&#125;"</span></div><div class="line">&#125;.call</div><div class="line"></div><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 目标4:</span></div><div class="line"><span class="comment"># 测试在块中定义的已经初始化的变量的值是否受外部的同名局部变量值的影响:(局部变量的定义在块定义的后面)</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line"><span class="comment"># 结论</span></div><div class="line"><span class="comment"># 1、最终的值是块中变量的值，局部变量不能影响块中同名变量的值</span></div><div class="line"><span class="comment"># 2、局部变量的值会不随块中同名变量的值在执行过程中的改变而改变,day_changed的值:Sun</span></div><div class="line"><span class="comment"># 3、发生1、2情况的原因是：因为day局部变量的定义出现在块定义的后面，这就导致了块根本没有绑定day这个局部变量</span></div><div class="line"><span class="comment"># 块内的变量day是块内部附加的变量，此时块内部的day与块外部的day没有任何关系</span></div><div class="line"><span class="comment"># =============================</span></div><div class="line">lambda &#123;</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">my_method</span></span></div><div class="line">    firstname = <span class="string">"Maria"</span></div><div class="line">    lastname = <span class="string">"Sharapova"</span></div><div class="line">    <span class="keyword">yield</span> <span class="string">"Hi! I'm"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line">  firstname = <span class="string">"Max"</span></div><div class="line">  lastname = <span class="string">"Black"</span></div><div class="line">  <span class="comment"># day = "Sun"</span></div><div class="line">  myname = lambda &#123; <span class="params">|say|</span> day = <span class="string">"Mon"</span>; puts <span class="string">"test4: <span class="subst">#&#123;say&#125;</span> <span class="subst">#&#123;firstname&#125;</span> <span class="subst">#&#123;lastname&#125;</span> at <span class="subst">#&#123;day&#125;</span>"</span>&#125;</div><div class="line">  day = <span class="string">"Sun"</span></div><div class="line">  my_method &amp;myname <span class="comment">#＝&gt; Hi! I'm Max Black at Mon</span></div><div class="line">  day_changed = day</div><div class="line">  puts <span class="string">"test4: day:<span class="subst">#&#123;day_changed&#125;</span>"</span></div><div class="line">  <span class="comment"># day = "Wed"</span></div><div class="line">  <span class="comment"># my_method &amp;myname #＝&gt; Hi! I'm Max Black at Mon</span></div><div class="line">  <span class="comment"># day_changed = day</span></div><div class="line">  <span class="comment"># puts "test5: day:#&#123;day_changed&#125;" # =&gt; Web</span></div><div class="line">&#125;.call</div></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/development/">程序开发</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/ruby/">Ruby</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-redo-log-record-type-and-function" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/redo-log-record-type-and-function/" class="article-date">
      <time datetime="2015-03-24T12:30:28.000Z" itemprop="datePublished">2015-03-24</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/redo-log-record-type-and-function/">redo log record type and function</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>So each redo log record has a type. A redo log record type helps to identify the function that will be used to apply or execute the redo log during recovery. The contents of the redo log record must then contain all the arguments or parameters needed by the function</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/database/">数据库</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/innodb/">innodb</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/mysql/">mysql</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-mysql-mac-auto-attempt-restart-when-start-fail" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/mysql-mac-auto-attempt-restart-when-start-fail/" class="article-date">
      <time datetime="2015-03-23T15:27:00.000Z" itemprop="datePublished">2015-03-23</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/mysql-mac-auto-attempt-restart-when-start-fail/">mysql  mac 环境启动失败后会自动尝试多次启动</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>mysql mac 环境下启动失败后会自动尝试多次启动，mysql是用brew安装的，启动命令用的是launchctl，不知道是不是和launchctl命令有关，还是说mysql本身启动就是这样的。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/database/">数据库</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/mysql/">mysql</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-mysql-redo-writed-ahead-log" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/mysql-redo-writed-ahead-log/" class="article-date">
      <time datetime="2015-03-22T09:33:11.000Z" itemprop="datePublished">2015-03-22</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/mysql-redo-writed-ahead-log/">mysql redo日志先行</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <blockquote>
<p><strong>redo日志应首先持久化在磁盘上，然后事务的操作结果才写入db buffer，（此时，内存中的数据和data file对应的数据不同，我们认为内存中的数据是脏数据），db buffer再选择合适的时机将数据持久化到data file中。这种顺序可以保证在需要故障恢复时恢复最后的修改操作。先持久化日志的策略叫做Write Ahead Log，即预写日志,也叫日志先行。</strong></p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/database/">数据库</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/innodb/">innodb</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/mysql/">mysql</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-the-record-donst-be-actually-detete" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/the-record-donst-be-actually-detete/" class="article-date">
      <time datetime="2015-03-20T16:13:51.000Z" itemprop="datePublished">2015-03-21</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/the-record-donst-be-actually-detete/">数据不会被删除，除非page中的数据被重新组织</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>数据不会被删除，除非page中的数据被重新组织</p>
<blockquote>
<p>Of course actually deleting the record still doesn’t actually delete it — it just links the record into a “garbage” list, where record space may be reused. However nothing is guaranteed to be really removed from a page until the page is re-organized.</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/database/">数据库</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/innodb/">innodb</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/mysql/">mysql</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-mysql-undo-flush-to-disk" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/mysql-undo-flush-to-disk/" class="article-date">
      <time datetime="2015-03-20T13:32:07.000Z" itemprop="datePublished">2015-03-20</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/mysql-undo-flush-to-disk/">mysql undo日志写入磁盘</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>mysql undo日志写入磁盘，以512B写入磁盘，这样就保证了写入的原子性，因为磁盘扇区的size为512B，所以写入要么成功，要么失败，不会发生只写入部分写入的情况，如只写入了100B，这种情况是绝对不会发生的。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/database/">数据库</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/innodb/">innodb</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/mysql/">mysql</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-undo-segment-header-page-addr" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/undo-segment-header-page-addr/" class="article-date">
      <time datetime="2015-03-19T13:42:01.000Z" itemprop="datePublished">2015-03-19</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/undo-segment-header-page-addr/">undo segment的头页面的址址</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>系统表空间的第五个页面，保存着undo segment的头页面的址址，这个是系统固定下来的。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/database/">数据库</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/innodb/">innodb</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/mysql/">mysql</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-how-to-create-current-real-and-snapshot" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/how-to-create-current-real-and-snapshot/" class="article-date">
      <time datetime="2015-03-18T15:59:24.000Z" itemprop="datePublished">2015-03-18</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/how-to-create-current-real-and-snapshot/">mysql 当前读与快照读如何产生</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>mysql当前读与快照读如何产生?</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">where</span> ? <span class="keyword">lock</span> <span class="keyword">in</span> <span class="keyword">share</span> <span class="keyword">mode</span>;</div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">where</span> ? <span class="keyword">for</span> <span class="keyword">update</span>;</div><div class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">table</span> <span class="keyword">values</span> (…);</div><div class="line"><span class="keyword">update</span> <span class="keyword">table</span> <span class="keyword">set</span> ? <span class="keyword">where</span> ?;</div><div class="line"><span class="keyword">delete</span> <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">where</span> ?;</div><div class="line"></div><div class="line"><span class="comment">-- 所有以上的语句，都属于当前读，读取记录的最新版本。并且，读取之后，还需要保证其他并发事务不能修改当前记录，对读取记录加锁。其中，除了第一条语句，对读取记录加S锁 (共享锁)外，其他的操作，都加的是X锁 (排它锁)。</span></div></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/database/">数据库</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/innodb/">innodb</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/mysql/">mysql</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-mysql-consistent-noblocking-read" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/mysql-consistent-noblocking-read/" class="article-date">
      <time datetime="2015-03-17T08:41:37.000Z" itemprop="datePublished">2015-03-17</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/mysql-consistent-noblocking-read/">mysql 非锁定一致性读</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>在READ COMMIT与REPEATABLE-READ隔离级别下，在读取时由于使用了非锁定一致性读，所以在读取数据时是不加读锁的（读取的是snapshot数据，所以不用加锁）。由于没有加锁，所以自然不用等待其它事务锁资源的释放。从而提高了并发性。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/database/">数据库</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/innodb/">innodb</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/mysql/">mysql</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
    <article id="post-attribute-of-log-idempotence" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/attribute-of-log-idempotence/" class="article-date">
      <time datetime="2015-03-16T09:46:48.000Z" itemprop="datePublished">2015-03-16</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/attribute-of-log-idempotence/">日志文件中的操作记录应该具有幂等性</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>在日志文件中的操作记录应该具有幂等性。幂等性，就是说同一个操作执行多次和执行一次，结果是一样的。例如，5<em>1 = 5</em>1<em>1</em>1，所以对5的乘1操作具有幂等性。日志文件在故障恢复中，可能会回放多次（比如第一次回放到一半时系统断电了，不得不再重新回放），如果操作记录不满足幂等性，会造成数据错误。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/category/database/">数据库</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tag/mysql/">mysql</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>










  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/4/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/43/">43</a><a class="extend next" rel="next" href="/page/6/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i>
                2009~2017 戛戛Happy
                
                    <i class="fa fa-check-circle-o"></i>
                    京ICP备10044755号
                
            </div>
            <div class="footer-right">
                 <i class="fa fa-heart animated infinite pulse"></i> <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-sitemap"></i>
                 <a href="/sitemap.xml" target="_blank">XML谷歌</a> <a href="/sitemap_baidu.xml" target="_blank">XML百度</a>
                 <i class="fa fa-bar-chart"></i> <script src="http://s15.cnzz.com/stat.php?id=2325808&web_id=2325808" language="JavaScript"></script>
            </div>
        </div>
        
    </div>
</footer>

    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17621945-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>


  </div>
</body>
</html>